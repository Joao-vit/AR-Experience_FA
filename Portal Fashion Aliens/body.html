<div id="overlay" style="display: none" class="absolute-fill">
  <img id="recenterButton" src="./assets/textures/recenter.png" />
  <span id="promptText"></span>
</div>

<a-scene
  responsive-immersive
  landing-page="mediaSrc: #landing-page-video;"
  xrextras-loading
  xrextras-runtime-error
  renderer="colorManagement: true;"
  xrweb="allowedDevices: any; disableDefaultEnvironment: true;"
>
  <xrextras-resource
    id="landing-page-video"
    src="./assets/moon-portal.mp4"
  ></xrextras-resource>

  <!-- We can define assets here to be loaded while the load screen is displayed -->
  <a-assets>
    <!-- models -->
    <a-asset-item
      id="portal-rim-model"
      src="./assets/models/portal_1.glb"
    ></a-asset-item>
    <a-asset-item
      id="moon-model"
      src="./assets/models/ground/tokyo_osm.glb"
    ></a-asset-item>
    <a-asset-item
      id="platform-model"
      src="./assets/models/rock_platform.glb"
    ></a-asset-item>
    <a-asset-item
      id="obj-model"
      src="./assets/models/stylized_planet.glb"
    ></a-asset-item>
    <a-asset-item id="flag-model" src="./assets/models/flag.glb"></a-asset-item>
    <a-asset-item
      id="rocks-model"
      src="./assets/models/rocks.glb"
    ></a-asset-item>
    <!-- textures -->
    <img id="posx" src="./assets/textures/cubemap/posx.jpg" />
    <img id="posy" src="./assets/textures/cubemap/posy.jpg" />
    <img id="posz" src="./assets/textures/cubemap/posz.jpg" />
    <img id="negx" src="./assets/textures/cubemap/negx.jpg" />
    <img id="negy" src="./assets/textures/cubemap/negy.jpg" />
    <img id="negz" src="./assets/textures/cubemap/negz.jpg" />
    <img id="skybox-img" src="./assets/textures/skysea.jpg" />
    <img id="blob-shadow-img" src="./assets/textures/blob-shadow.png" />
    <img id="logo-img" src="./assets/textures/bolinha_FA.png" />
    <img id="capapng" src="./assets/textures/portalcapa.png" />
    <img id="capasrevista" src="./assets/textures/capasrevistas.png" />
    <video
      id="portal-video"
      muted
      autoplay
      playsinline
      crossorigin="anonymous"
      loop="true"
      src="./assets/textures/portal-video.mp4"
    ></video>
  </a-assets>

  <!-- Camera -->
  <a-camera id="camera" position="0 9 11"> </a-camera>

  <xrextras-capture-button></xrextras-capture-button>
  <xrextras-capture-config
    watermark-image-url="./assets/LOGO.png"
    watermark-max-width="100"
    watermark-max-height="10"
  >
  </xrextras-capture-config>
  <xrextras-capture-preview></xrextras-capture-preview>

  <!-- Hider walls -->
  <xrextras-opaque-background remove="true">
    <a-entity id="hider-walls">
      <a-box
        scale="100 1 100"
        position="0 -1 49"
        xrextras-hider-material
      ></a-box>
      <a-box
        scale="100 100 1"
        position="0 50 75"
        xrextras-hider-material
      ></a-box>
      <a-box
        scale="100 1 100"
        position="0 100 49"
        xrextras-hider-material
      ></a-box>
      <a-box
        scale="1 100 100"
        position="-30 50 50"
        xrextras-hider-material
      ></a-box>
      <a-box
        scale="1 100 100"
        position="30 50 50"
        xrextras-hider-material
      ></a-box>
      <a-ring
        id="portalHiderRing"
        radius-inner="0.001"
        radius-outer="100"
        position="0 7.5 -0.2"
        xrextras-hider-material
      ></a-ring>
      <a-ring
        id="portalHiderWall"
        radius-inner="4.5"
        radius-outer="100"
        position="0 7.5 -0.4"
        xrextras-hider-material
      ></a-ring>
    </a-entity>

    <a-entity id="portal-wall">
      <a-circle
        radius="5.2"
        rotation="0 180 0"
        position="0 7.5 0"
        scale="0.8 0.8 0"
        xrextras-hider-material
      ></a-circle>
      <a-circle
        radius="5.2"
        rotation="0 180 0"
        position="0 7.5 0.25"
        scale="0.8 0.8 0"
        xrextras-hider-material
      ></a-circle>
    </a-entity>
  </xrextras-opaque-background>

  <!-- Lights -->
  <a-entity
    light="
      type: directional;
      castShadow: true;
      shadowMapHeight:2048;
      shadowMapWidth:2048;
      shadowCameraTop: 35;
      shadowCameraBottom: -20;
      shadowCameraRight: 40;
      shadowCameraLeft: -10;
      target: #portalRim"
    xrextras-attach="target: portalRim; offset: 18 7 14"
    shadow
  >
  </a-entity>

  <a-light type="ambient" intensity="0.3"></a-light>

  <!-- Portal Contents -->
  <a-entity id="portal-contents">
    <a-entity
      gltf-model="#moon-model"
      rotation="0 0 0"
      position="8 -10 -5"
      scale="0.30 0.30 0.30"
      shadow="cast: false"
    >
    </a-entity>

    <!--<a-entity
      gltf-model="#obj-model"
      rotation="0 0 0"
      position="-12 5 -16"
      spin="axis: y; speed: 14000"
      scale="5 5 5"
      shadow="cast: false">
    </a-entity>
  removido do projeto original-->

    <!--<a-entity
      gltf-model="#platform-model"
      rotation="0 0 0"
      position="-20 7 -5"
      scale="3 3 3"
      shadow="cast: false">
    </a-entity>
  removido do projetoi original-->

    <a-entity
      gltf-model="#flag-model"
      rotation="0 30 0"
      cubemap-static
      position="-14 0 -43"
      scale="5 5 5"
      shadow="receive: false"
    >
    </a-entity>

    <!-- <a-entity
      gltf-model="#rocks-model"
      cubemap-static
      position="-14 -1 -42"
      scale="0.75 0.25 0.75"
      shadow="receive: false">
     </a-entity>
    arquivos removidos do projeto original-->

    <!-- <a-entity
    material="shader: flat; src: #capasrevista;;side: front; transparent: true"
    geometry="primitive: plane; height: 1; width: 11;"
    rotation="0 -70 0"
    position="12 5 -16"
    scale="2 10 10">
  </a-entity> removido do projeto original -->

    <a-sky src="#skybox-img" rotation="0 20 0" position="0 3 0"></a-sky>
  </a-entity>

  <!-- Portal -->
  <a-entity
    id="portalRim"
    gltf-model="#portal-rim-model"
    spin="axis: x; speed: 14000"
    cubemap-realtime
    position="0 7.5 0.5"
    rotation="90 -90 -90"
    scale="0.01 0.01 0.01"
    shadow="receive: false"
  >
  </a-entity>

  <a-entity
    id="portalVideo"
    auto-play-video="video: #portal-video"
    material="shader: flat; src: #portal-video; blending: additive; side: front; transparent: true"
    geometry="primitive: plane; height: 1; width: 1;"
    position="0 7.5 0.1"
    scale="0.001 0.001 0.001"
  >
  </a-entity>

  <a-circle
    id="portalShadow"
    radius="0.5"
    material="src: #blob-shadow-img; opacity: 0.65; roughness: 0.8; metalness: 0"
    position="0 0.01 1.25"
    rotation="-90 0 0"
    scale="0.001 0.001 0.001"
  >
  </a-circle>

  <a-entity
    id="capaFA"
    material="shader: flat; src: #capapng; opacity: 0.65;side: front; transparent: true"
    geometry="primitive: plane; height: 2; width: 2;"
    position="0 7.5 0.2"
    scale="0.001 0.001 0.001"
  >
  </a-entity>
</a-scene>
